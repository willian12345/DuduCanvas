function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=Array(e);i<e;i++)r[i]=t[i];return r}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function asyncGeneratorStep(t,e,i,r,n,s,o){try{var a=t[s](o),h=a.value}catch(t){return void i(t)}a.done?e(h):Promise.resolve(h).then(r,n)}function _asyncToGenerator(a){return function(){var t=this,o=arguments;return new Promise(function(e,i){var r=a.apply(t,o);function n(t){asyncGeneratorStep(r,e,i,n,s,"next",t)}function s(t){asyncGeneratorStep(r,e,i,n,s,"throw",t)}n(void 0)})}}function _callSuper(t,e,i){return e=_getPrototypeOf(e),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(e,i||[],_getPrototypeOf(t).constructor):e.apply(t,i))}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _construct(t,e,i){var r;return _isNativeReflectConstruct()?Reflect.construct.apply(null,arguments):((r=[null]).push.apply(r,e),e=new(t.bind.apply(t,r)),i&&_setPrototypeOf(e,i.prototype),e)}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_toPropertyKey(r.key),r)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function _createForOfIteratorHelper(t,e){var i,r,n,s,o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(o)return n=!(r=!0),{s:function(){o=o.call(t)},n:function(){var t=o.next();return r=t.done,t},e:function(t){n=!0,i=t},f:function(){try{r||null==o.return||o.return()}finally{if(n)throw i}}};if(Array.isArray(t)||(o=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length)return o&&(t=o),s=0,{s:e=function(){},n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _defineProperty(t,e,i){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _get(){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=_superPropBase(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:i):r.value}).apply(null,arguments)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function(){return!!t})()}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _iterableToArrayLimit(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var r,n,s,o,a=[],h=!0,l=!1;try{if(s=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;h=!1}else for(;!(h=(r=s.call(i)).done)&&(a.push(r.value),a.length!==e);h=!0);}catch(t){l=!0,n=t}finally{try{if(!h&&null!=i.return&&(o=i.return(),Object(o)!==o))return}finally{if(l)throw n}}return a}}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ownKeys(e,t){var i,r=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)),r}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(i),!0).forEach(function(t){_defineProperty(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function _possibleConstructorReturn(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _regeneratorRuntime(){_regeneratorRuntime=function(){return o};var h,o={},t=Object.prototype,l=t.hasOwnProperty,c=Object.defineProperty||function(t,e,i){t[e]=i.value},e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",i=e.asyncIterator||"@@asyncIterator",n=e.toStringTag||"@@toStringTag";function s(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(h){s=function(t,e,i){return t[e]=i}}function a(t,e,i,r){var n,s,o,a,e=e&&e.prototype instanceof v?e:v,e=Object.create(e.prototype),r=new P(r||[]);return c(e,"_invoke",{value:(n=t,s=i,o=r,a=d,function(t,e){if(a===p)throw Error("Generator is already running");if(a===g){if("throw"===t)throw e;return{value:h,done:!0}}for(o.method=t,o.arg=e;;){var i=o.delegate;if(i){i=function t(e,i){var r=i.method,n=e.iterator[r];if(n===h)return i.delegate=null,"throw"===r&&e.iterator.return&&(i.method="return",i.arg=h,t(e,i),"throw"===i.method)||"return"!==r&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;r=u(n,e.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,y;n=r.arg;return n?n.done?(i[e.resultName]=n.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=h),i.delegate=null,y):n:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,y)}(i,o);if(i){if(i===y)continue;return i}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(a===d)throw a=g,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);a=p;i=u(n,s,o);if("normal"===i.type){if(a=o.done?g:f,i.arg===y)continue;return{value:i.arg,done:o.done}}"throw"===i.type&&(a=g,o.method="throw",o.arg=i.arg)}})}),e}function u(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}o.wrap=a;var d="suspendedStart",f="suspendedYield",p="executing",g="completed",y={};function v(){}function _(){}function m(){}var e={},w=(s(e,r,function(){return this}),Object.getPrototypeOf),w=w&&w(w(R([]))),b=(w&&w!==t&&l.call(w,r)&&(e=w),m.prototype=v.prototype=Object.create(e));function x(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function k(o,a){var e;c(this,"_invoke",{value:function(i,r){function t(){return new a(function(t,e){!function e(t,i,r,n){var s,t=u(o[t],o,i);if("throw"!==t.type)return(i=(s=t.arg).value)&&"object"==typeof i&&l.call(i,"__await")?a.resolve(i.__await).then(function(t){e("next",t,r,n)},function(t){e("throw",t,r,n)}):a.resolve(i).then(function(t){s.value=t,r(s)},function(t){return e("throw",t,r,n)});n(t.arg)}(i,r,t,e)})}return e=e?e.then(t,t):t()}})}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function R(e){if(e||""===e){var i,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return i=-1,(t=function t(){for(;++i<e.length;)if(l.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=h,t.done=!0,t}).next=t}throw new TypeError(typeof e+" is not iterable")}return c(b,"constructor",{value:_.prototype=m,configurable:!0}),c(m,"constructor",{value:_,configurable:!0}),_.displayName=s(m,n,"GeneratorFunction"),o.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},o.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,n,"GeneratorFunction")),t.prototype=Object.create(b),t},o.awrap=function(t){return{__await:t}},x(k.prototype),s(k.prototype,i,function(){return this}),o.AsyncIterator=k,o.async=function(t,e,i,r,n){void 0===n&&(n=Promise);var s=new k(a(t,e,i,r),n);return o.isGeneratorFunction(e)?s:s.next().then(function(t){return t.done?t.value:s.next()})},x(b),s(b,n,"Generator"),s(b,r,function(){return this}),s(b,"toString",function(){return"[object Generator]"}),o.keys=function(t){var e,i=Object(t),r=[];for(e in i)r.push(e);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in i)return t.value=e,t.done=!1,t}return t.done=!0,t}},o.values=R,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&l.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=h)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(i){if(this.done)throw i;var r=this;function t(t,e){return s.type="throw",s.arg=i,r.next=t,e&&(r.method="next",r.arg=h),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e],s=n.completion;if("root"===n.tryLoc)return t("end");if(n.tryLoc<=this.prev){var o=l.call(n,"catchLoc"),a=l.call(n,"finallyLoc");if(o&&a){if(this.prev<n.catchLoc)return t(n.catchLoc,!0);if(this.prev<n.finallyLoc)return t(n.finallyLoc)}else if(o){if(this.prev<n.catchLoc)return t(n.catchLoc,!0)}else{if(!a)throw Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return t(n.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;0<=i;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&l.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var n=r;break}}var s=(n=n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc?null:n)?n.completion:{};return s.type=t,s.arg=e,n?(this.method="next",this.next=n.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),S(i),y}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var i,r,n=this.tryEntries[e];if(n.tryLoc===t)return"throw"===(i=n.completion).type&&(r=i.arg,S(n)),r}throw Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:R(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=h),y}},o}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _superPropBase(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _toPrimitive(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===e?String:Number)(t);i=i.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"==typeof t?t:t+""}function _unsupportedIterableToArray(t,e){var i;if(t)return"string"==typeof t?_arrayLikeToArray(t,e):"Map"===(i="Object"===(i={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,e):void 0}var draw=Symbol("draw"),drawImage$1=Symbol("drawImage"),getAlpha=Symbol("getAlpha"),append=Symbol("append"),remove=Symbol("remove"),instructions=Symbol("instructions"),drawGraphics=Symbol("drawGraphics");function getPrefix(){var t="";return"undefined"!=typeof uni?t=uni:"undefined"!=typeof wx?t=wx:"undefined"!=typeof my?t=my:"undefined"!=typeof tt&&(t=tt),t}var prefix=getPrefix(),createSelectorQuery=(prefix.getImageInfo,prefix.createSelectorQuery),total=Symbol("total"),loaded=Symbol("loaded"),load=Symbol("load"),loadProgressCallback=Symbol("loadProgressCallback"),imageMap=Symbol("imageMap"),ImgLoader=function(){return _createClass(function t(e,i,r){var n=this;return _classCallCheck(this,t),this.canvas=e,this[total]=i.length,this[loaded]=0,this[r]=r,this[imageMap]=new Map,new Promise(function(t){n[load](i,t)})},[{key:"get",value:function(t){return this[imageMap].get(t)}},{key:load,value:function(t,i){var r=this;return t.forEach(function(t){var e=r.canvas.createImage();e.onload=function(){r[imageMap].set(t.id,{path:t.src,width:e.width,height:e.height,image:e}),r[loaded]++,r[loadProgressCallback]&&r[loadProgressCallback](p),1<=r[loaded]/r[total]&&i(r)},e.src=t.src}),this}}])}();function getPosAfterRotation(t,e,i){t*=Math.PI/180;return{x:Math.cos(t)*e-Math.sin(t)*i,y:Math.cos(t)*i+Math.sin(t)*e}}function getMaxValue(t){for(var e=t[0].x,i=t[0].x,r=t[0].y,n=t[0].y,s=1,o=t.length;s<o;s++)e>t[s].x&&(e=t[s].x),t[s].x>i&&(i=t[s].x),r>t[s].y&&(r=t[s].y),t[s].y>n&&(n=t[s].y);return[e,r,i,n]}function findNodes(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],i=t.childs.length;if(i)for(var r,n=0;n<i;n++){if(t.childs[n].childs&&t.childs[n].childs.length)return r=findNodes(t.childs[n]),e.push(t.childs[n]),e.concat(r);e.push(t.childs[n])}else e.push(t);return e}var BeginPath=function(){return _createClass(function t(){_classCallCheck(this,t)},[{key:"exec",value:function(t){t.beginPath()}}])}(),MoveTo=function(){return _createClass(function t(e,i){_classCallCheck(this,t),this.x=e,this.y=i},[{key:"exec",value:function(t,e){var e=_slicedToArray(e.getPosition(),2),i=e[0];t.moveTo(this.x+i,this.y+e[1])}}])}(),LineTo=function(){return _createClass(function t(e,i){_classCallCheck(this,t),this.x=e,this.y=i},[{key:"exec",value:function(t,e){var e=_slicedToArray(e.getPosition(),2),i=e[0];t.lineTo(this.x+i,this.y+e[1])}}])}(),Arc=function(){return _createClass(function t(e,i,r,n,s,o){_classCallCheck(this,t),_defineProperty(this,"name","Arc"),this.x=e,this.y=i,this.radius=r,this.startAngle=n,this.endAngle=s,this.anticlockwise=o},[{key:"exec",value:function(t,e){var e=_slicedToArray(e.getPosition(),2),i=e[0];t.arc(this.x+i,this.y+e[1],this.radius,this.startAngle,this.endAngle,this.anticlockwise)}}])}(),ArcTo=function(){return _createClass(function t(e,i,r,n,s){_classCallCheck(this,t),_defineProperty(this,"name","ArcTo"),this.x1=e,this.y1=i,this.x2=r,this.y2=n,this.radius=s},[{key:"exec",value:function(t,e){var e=_slicedToArray(e.getPosition(),2),i=e[0],e=e[1];t.arcTo(this.x1+i,this.y1+e,this.x2+i,this.y2+e,this.radius)}}])}(),Stroke=function(){return _createClass(function t(){_classCallCheck(this,t)},[{key:"exec",value:function(t){t.stroke()}}])}(),Fill=function(){return _createClass(function t(){_classCallCheck(this,t)},[{key:"exec",value:function(t){t.fill()}}])}(),SetFillStyle$1=function(){return _createClass(function t(e){_classCallCheck(this,t),this.style=e},[{key:"exec",value:function(t,e){"CreateLinearGradient"===this.style.name||"CreateRadialGradient"===this.style.name?t.fillStyle=this.style.exec(t,e):t.fillStyle=this.style}}])}(),SetStrokeStyle=function(){return _createClass(function t(e){_classCallCheck(this,t),this.style=e},[{key:"exec",value:function(t){t.strokeStyle=this.style}}])}(),Clip=function(){return _createClass(function t(){_classCallCheck(this,t)},[{key:"exec",value:function(t){t.clip()}}])}(),QuadraticCurveTo=function(){return _createClass(function t(e,i,r,n){_classCallCheck(this,t),this.cpx=e,this.cpy=i,this.x=r,this.y=n},[{key:"exec",value:function(t,e){var e=_slicedToArray(e.getPosition(),2),i=e[0],e=e[1];t.quadraticCurveTo(this.cpx+i,this.cpy+e,this.x+i,this.y+e)}}])}(),BezierCurveTo=function(){return _createClass(function t(e,i,r,n,s,o){_classCallCheck(this,t),this.cp1x=e,this.cp1y=i,this.cp2x=r,this.cp2y=n,this.x=s,this.y=o},[{key:"exec",value:function(t,e){var e=_slicedToArray(e.getPosition(),2),i=e[0],e=e[1];t.bezierCurveTo(this.cp1x+i,this.cp1y+e,this.cp2x+i,this.cp2y+e,this.x+i,this.y+e)}}])}(),DrawCircle=function(){return _createClass(function t(e,i,r){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3];_classCallCheck(this,t),this.x=e,this.y=i,this.radius=r,this.fill=n},[{key:"exec",value:function(t,e){var i=_slicedToArray(e.getPosition(),2),r=i[0],i=i[1];t.beginPath(),t.arc(this.x+r,this.y+i,this.radius,0,2*Math.PI),e.isMask?t.clip():this.fill&&t.fill()}}])}(),Rect=function(){return _createClass(function t(e,i,r,n){var s=4<arguments.length&&void 0!==arguments[4]&&arguments[4];_classCallCheck(this,t),this.x=e,this.y=i,this.w=r,this.h=n,this.isStroke=s},[{key:"exec",value:function(t,e){var i=_slicedToArray(e.getPosition(),2),r=i[0],r=this.x+r,i=this.y+i[1];t.beginPath(),e.isMask?(t.rect(r,i,this.w,this.h),t.clip()):this.isStroke?t.strokeRect(r,i,this.w,this.h):t.fillRect(r,i,this.w,this.h)}}])}(),RoundRect=function(){return _createClass(function t(e,i,r,n,s,o,a){_classCallCheck(this,t),this.stroke=void 0===a||a,void 0===s&&(s=5),this.x=e,this.y=i,this.width=r,this.height=n,this.fill=o;var h,l=s="number"==typeof s?{tl:s,tr:s,br:s,bl:s}:s;for(h in this.radius={},l)this.radius[h]=this.radius[h]||l[h]},[{key:"exec",value:function(t,e){var i,r=_slicedToArray(e.getPosition(),2),n=r[0]+this.x,r=r[1]+this.y,s=this.radius,o=this.width,a=this.height,h=e.masked?i=!1:(i=this.fill,this.stroke);t.beginPath(),t.moveTo(n+s.tl,r),t.lineTo(n+o-s.tr,r),t.quadraticCurveTo(n+o,r,n+o,r+s.tr),t.lineTo(n+o,r+a-s.br),t.quadraticCurveTo(n+o,r+a,n+o-s.br,r+a),t.lineTo(n+s.bl,r+a),t.quadraticCurveTo(n,r+a,n,r+a-s.bl),t.lineTo(n,r+s.tl),t.quadraticCurveTo(n,r,n+s.tl,r),t.closePath(),e.isMask?t.clip():(i&&t.fill(),h&&t.stroke())}}])}(),ClearRect=function(){return _createClass(function t(e,i,r,n){_classCallCheck(this,t),this.x=e,this.y=i,this.w=r,this.h=n},[{key:"exec",value:function(t,e){var e=_slicedToArray(e.getPosition(),2),i=e[0];t.clearRect(this.x+i,this.y+e[1],this.w,this.h)}}])}(),LineCap=function(){return _createClass(function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"butt";_classCallCheck(this,t),this.lineCap=e},[{key:"exec",value:function(t,e){t.lineCap=this.lineCap}}])}(),LineJoin=function(){return _createClass(function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"bevel",i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;_classCallCheck(this,t),this.lineJoin=e,this.miterLimit=i},[{key:"exec",value:function(t){10!=this.miterLimit&&"bevel"===this.style&&(t.miterLimit=this.miterLimit),t.lineJoin=this.lineJoin}}])}(),LineWidth=function(){return _createClass(function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;_classCallCheck(this,t),this.lineWidth=e},[{key:"exec",value:function(t,e){t.lineWidth=this.lineWidth}}])}(),SetLineDash=function(){return _createClass(function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck(this,t),this.lineDash=e},[{key:"exec",value:function(t,e){t.setLineDash(this.lineDash)}}])}(),Graphics=function(){return _createClass(function t(){var o=this;_classCallCheck(this,t),_defineProperty(this,"name","Graphics"),_defineProperty(this,"graphics",{beginPath:function(){return o[append](new BeginPath),o.graphics},moveTo:function(t,e){return o[append](new MoveTo(t,e)),o.graphics},setLineDash:function(t){return o[append](new SetLineDash(t)),o.graphics},lineWidth:function(t){return o[append](new LineWidth(t)),o.graphics},lineCap:function(t){return o[append](new LineCap(t)),o.graphics},lineJoin:function(t){return o[append](new LineJoin(t)),o.graphics},lineTo:function(t,e){return o[append](new LineTo(t,e)),o.graphics},quadraticCurveTo:function(t,e,i,r){return o[append](new QuadraticCurveTo(t,e,i,r)),o.graphics},bezierCurveTo:function(t,e,i,r,n,s){return o[append](new BezierCurveTo(t,e,i,r,n,s)),o.graphics},arc:function(t,e,i,r,n){var s=5<arguments.length&&void 0!==arguments[5]&&arguments[5];return o[remove]("Arc"),o[append](new Arc(t,e,i,r,n,s)),o.graphics},arcTo:function(t,e,i,r,n){return o[remove]("ArcTo"),o[append](new ArcTo(t,e,i,r,n)),o.graphics},stroke:function(){return o[append](new Stroke),o.graphics},fill:function(){return o[append](new Fill),o.graphics},fillStyle:function(t){return o[append](new SetFillStyle$1(t)),o.graphics},strokeStyle:function(t){return o[append](new SetStrokeStyle(t)),o.graphics},fillCircle:function(){return o[append](new DrawCircle(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,2<arguments.length&&void 0!==arguments[2]?arguments[2]:20,!0)),o.graphics},strokeCircle:function(){return o[append](new DrawCircle(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,2<arguments.length&&void 0!==arguments[2]?arguments[2]:20)),o[append](new Stroke),o.graphics},fillRect:function(){return o[append](new Rect(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,2<arguments.length&&void 0!==arguments[2]?arguments[2]:10,3<arguments.length&&void 0!==arguments[3]?arguments[3]:20)),o.graphics},strokeRect:function(){return o[append](new Rect(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,2<arguments.length&&void 0!==arguments[2]?arguments[2]:10,3<arguments.length&&void 0!==arguments[3]?arguments[3]:20,!0)),o[append](new Stroke),o.graphics},fillRoundRect:function(){return o[append](new RoundRect(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,2<arguments.length&&void 0!==arguments[2]?arguments[2]:10,3<arguments.length&&void 0!==arguments[3]?arguments[3]:10,4<arguments.length&&void 0!==arguments[4]?arguments[4]:8,5<arguments.length?arguments[5]:void 0,6<arguments.length?arguments[6]:void 0)),o.graphics},strokeRoundRect:function(t,e,i,r,n){return o[append](new RoundRect(t,e,i,r,n,!1,!0)),o[append](new Stroke),o.graphics},clearRect:function(t,e,i,r){return o[append](new ClearRect(t,e,i,r)),o.graphics},clip:function(){return o[append](new Clip),o.graphics}}),this[instructions]=[]},[{key:append,value:function(t){this[instructions].push(t)}},{key:remove,value:function(e){this[instructions]=this[instructions].filter(function(t){return t.name!==e})}},{key:drawGraphics,value:function(e){var i=this;this[instructions].forEach(function(t){t.exec(e,i)})}}])}(),context=null,displayObjectId=0,id=Symbol("id"),scale=Symbol("scale"),mask=Symbol("mask"),setShadow=Symbol("setShadow"),DisplayObject=function(){function l(){var t;return _classCallCheck(this,l),_defineProperty(t=_callSuper(this,l),"name","DisplayObject"),_defineProperty(t,"x",0),_defineProperty(t,"y",0),_defineProperty(t,"alpha",1),_defineProperty(t,"regX",0),_defineProperty(t,"regY",0),_defineProperty(t,"scaleX",1),_defineProperty(t,"scaleY",1),_defineProperty(t,"rotation",0),_defineProperty(t,"parent",null),_defineProperty(t,"childs",[]),_defineProperty(t,"shadow",""),t[drawGraphics]=_get(_getPrototypeOf(l.prototype),drawGraphics,t),t[scale]=1,t[id]=displayObjectId++,t}return _inherits(l,Graphics),_createClass(l,[{key:"mask",get:function(){return this[mask]},set:function(t){if("Shape"!==t.name)throw new Error("遮罩必须是 Shape 对象");t.isMask=!0,this[mask]=t}},{key:"scale",get:function(){return this[scale]},set:function(t){this.scaleX=t,this.scaleY=t,this[scale]=t}},{key:"addChild",value:function(){for(var i=this,t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e.map(function(t,e){if(t[id]===i[id])throw new Error("不能自己添加自己为 child :".concat(t.name));if(t.isMask)throw new Error("已被设置成 mask 遮罩 不能 addChild 到其它父级内:".concat(t.name));return t.mask&&(t.mask.parent=i),t.parent=i,t.zIndex=e,t});this.childs=this.childs.concat(n)}},{key:"removeChild",value:function(e){this.childs=this.childs.filter(function(t){return t[id]!=e[id]})}},{key:draw,value:function(){var e=this;this[drawGraphics](context),this.childs.forEach(function(t){context.save(),e.transform(t,context),t.shadow.length&&e[setShadow](t),context.globalAlpha=e[getAlpha](),context.rotate(0),t[draw](context),context.restore()})}},{key:setShadow,value:function(t){var e=t.shadow.split(" ");if("Sprite"===t.name||"Group"===t.name)throw new Error("Sprite 或 Group 组件对象不允许设置 shadow");if(e.length<4)throw new Error('shadow 需要 4 个值 eg: "10 10 10 black"');context.shadowOffsetX=e[0],context.shadowOffsetY=e[1],context.shadowBlur=e[2],context.shadowColor=e[3]}},{key:getAlpha,value:function(){for(var t=this.parent,e=this.alpha;t&&"Stage"!=t.name;)e*=t.alpha,t=t.parent;return e}},{key:"getPosition",value:function(){for(var t=this.masked||this.parent,e=this.x-this.regX,i=this.y-this.regY;t&&"Stage"!=t.name;)e+=t.x-t.regX,i+=t.y-t.regY,t=t.parent;return[e,i]}},{key:"getRotation",value:function(){return this.rotation}},{key:"getScale",value:function(){for(var t=this.parent,e=this.scaleX,i=this.scaleY;t&&"Stage"!=t.name;)e+=t.scaleX,i+=t.scaleY,t=t.parent;return[e,i]}},{key:"transform",value:function(t,e){var i,r,n,s,o;if("Stage"!==t.name)return e=e,s=(o=_slicedToArray(t.getPosition(),2))[0],o=o[1],i=t.getRotation(),r=(n=[t.scaleX,t.scaleY])[0],n=n[1],e.translate(s=s+t.regX,o=o+t.regY),e.scale(r,n),e.rotate(i*Math.PI/180),e.translate(-s,-o),this}},{key:"getRectangleRotatedPosition",value:function(t,e,i,r,n){return[getPosAfterRotation(t,-r,-n),getPosAfterRotation(t,e-r,-n),getPosAfterRotation(t,e-r,i-n),getPosAfterRotation(t,-r,i-n)]}},{key:"_getBounds",value:function(){var t,e,i=_slicedToArray(this.getPosition(),2),r=i[0],n=i[1],i=this.width,s=this.height,o=this.regX,a=this.regY;return 0!==this.rotation&&((e=this.getRectangleRotatedPosition(this.rotation,i,s,o,a)).map(function(t){return _objectSpread2(_objectSpread2({},t),{},{x:t.x+r+o,y:t.y+n+a})}),t=(e=_slicedToArray(getMaxValue(e),4))[0],i=e[2]-t,s=e[3]-(e=e[1]),r=t,n=e),{left:r,top:n,right:r+i,bottom:n+s,width:i,height:s}}},{key:"findNodesBounds",value:function(t){return findNodes(t).map(function(t){return t._getBounds()})}},{key:"getBounds",value:function(){var e,i,r,n,t,s,o,a,h;return 0===this.childs.length?this._getBounds():this.childs?(t=this.findNodesBounds(this),e=[],i=[],r=[],n=[],t.forEach(function(t){e.push(t.left),i.push(t.right),r.push(t.top),n.push(t.bottom)}),t=Math.min.apply(Math,e),s=Math.max.apply(Math,i),o=Math.min.apply(Math,r),a=Math.max.apply(Math,n),"Group"===this.name?((h=new l).width=s-t,h.height=a-o,h.x=this.x,h.y=this.y,h.regX=this.regX,h.regY=this.regY,h.rotation=this.rotation,this._getBounds.call(h)):{left:t,top:o,right:s,bottom:a,width:s-t,height:a-o}):void 0}}],[{key:"setContext",value:function(t){context=t}},{key:"getContext",value:function(){return context}}])}(),_width$2=Symbol("width"),_height$2=Symbol("height"),_display=Symbol("_display"),_alignItems$1=Symbol("_alignItems"),_justifyContent$1=Symbol("_justifyContent"),Group=function(){function i(t){var e;return _classCallCheck(this,i),_defineProperty(e=_callSuper(this,i),"name","Group"),e}return _inherits(i,DisplayObject),_createClass(i,[{key:"width",get:function(){return this[_width$2]},set:function(t){this[_width$2]=t}},{key:"height",get:function(){return this[_height$2]},set:function(t){this[_height$2]=t}},{key:"display",get:function(){return this[_display]},set:function(t){this[_display]=t}},{key:"alignItems",get:function(){return this[_alignItems$1]},set:function(t){this[_alignItems$1]=t}},{key:"justifyContent",get:function(){return this[_justifyContent$1]},set:function(t){this[_justifyContent$1]=t}}])}(),render=Symbol("render"),Stage=function(){function r(t,e,i){var a,h=e.width,l=e.height;return _classCallCheck(this,r),_defineProperty(a=_callSuper(this,r),"name","Stage"),_defineProperty(a,"canvas",null),_possibleConstructorReturn(a,new Promise(function(o){(i?createSelectorQuery().in(i):createSelectorQuery()).select(t).node(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark(function t(e){var i,r,n,s;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=e.node,r=(i=i).getContext("2d"),n=h,s=l,r.canvas.width=n,r.canvas.height=s,a.width=n,a.height=s,a.context=r,a.canvas=i,DisplayObject.setContext(a.context),o(a);case 13:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}()).exec()}))}return _inherits(r,DisplayObject),_createClass(r,[{key:"getContext",value:function(){return this.context}},{key:"update",value:function(){this[render]()}},{key:render,value:function(){this.context.clearRect(0,0,this.width,this.height),this[draw]()}}])}(),ROTATE_90DEG=1.5707963267948966,NO_ROTATION_RANGE=[[11904,12271],[12352,40959],[44032,55295],[63744,64255],[119552,119647],[131072,195103]];function needRotation(t){var e,i=t.codePointAt(0),r=_createForOfIteratorHelper(NO_ROTATION_RANGE);try{for(r.s();!(e=r.n()).done;){var n=_slicedToArray(e.value,2);if(n[0]<=i&&i<=n[1])return!1}}catch(t){r.e(t)}finally{r.f()}return!0}var FillText=function(){return _createClass(function t(e,i,r){_classCallCheck(this,t),_defineProperty(this,"instance",null),_defineProperty(this,"name","FillText"),this.text=e,this.x=i,this.y=r},[{key:"exec",value:function(t,e){var i=_slicedToArray((this.instance=e).getPosition(),2),r=i[0],n=i[1];if(t.font=e.font,"vertical-rl"===e.writeMode||"vertical-lr"===e.writeMode)this.vertical(t,r,n);else if(-1<e.wrapWidth)for(var s,o=this.getTextArr(t,e,this.text),a=0,h=o.length;a<h;a++)s=n+a*(e.fontSize+e.lineGap),t.fillText(o[a],r,s);else t.fillText(this.text,r,n)}},{key:"getTextArr",value:function(t,e,i){for(var r,n=e.wrapWidth,s=0,o=0,a=0,h=[];r=i[s];)(a+=t.measureText(r).width)<=n?h[o]?h[o]+=i[s]:h[o]=i[s]:(a=0,o++),s++;return h}},{key:"vertical",value:function(r,n,s){var t=this.text.split(""),e=this.instance.fontSize+this.instance.lineGap,o="vertical-rl"===this.instance.writeMode?-e:e,a=this.instance.fontSize,h=.5*a,l=0,c=0,u=this.instance.wrapHeight;t.map(function(t){var e,i;needRotation(t)?(-1<u&&u+s<l+s+h&&(c+=o,l=0),e=n+c+h,i=s+l+h,r.save(),r.translate(e,i),r.rotate(ROTATE_90DEG),r.translate(-e,-i),r.fillText(t,n+c,s+l),l+=h,r.restore()):(-1<u&&u+s<l+s+a&&(c+=o,l=0),r.fillText(t,n+c,s+l),l+=a)})}}])}(),SetFillStyle=function(){return _createClass(function t(e){_classCallCheck(this,t),this.style=e},[{key:"exec",value:function(t){t.fillStyle=this.style}}])}(),SetTextAlign=function(){return _createClass(function t(e){_classCallCheck(this,t),this.textAlign=e},[{key:"exec",value:function(t){t.textAlign=this.textAlign}}])}(),SetTextBaseline=function(){return _createClass(function t(e){_classCallCheck(this,t),this.textBaseline=e},[{key:"exec",value:function(t){t.textBaseline=this.textBaseline}}])}(),_text=Symbol("_text"),_width$1=Symbol("_width"),_height$1=Symbol("_height"),_fontSize=Symbol("_fontSize"),_wrapWidth=Symbol("_wrapWidth"),_wrapHeight=Symbol("_wrapHeight"),_writeMode=Symbol("_writeMode"),defaultFontSize=10,Text=function(){function i(t){var e;return _classCallCheck(this,i),_defineProperty(e=_callSuper(this,i),"name","Text"),_defineProperty(e,"lineGap",0),_defineProperty(e,"font","".concat(defaultFontSize,"px sans-serif")),e[drawGraphics]=_get(_getPrototypeOf(i.prototype),drawGraphics,e),e.init(t),e}return _inherits(i,DisplayObject),_createClass(i,[{key:"init",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.text,i=t.font,r=t.color,t=t.fontSize;this[_writeMode]="",i&&(i=null==(i=(this.font=i).match(/\d+/))?void 0:i[0])&&(this.fontSize=parseInt(i),this[_height$1]=this.fontSize+this.lineGap),t&&(this.font="".concat(t,"px sans-serif"),this.fontSize=parseInt(t),this[_height$1]=t+this.lineGap),this.fontSize||(this.fontSize=defaultFontSize),r&&(this.color=r),this.textAlign="left",this.textBaseline="top",this[_text]="",e&&(this.text=e)}},{key:"text",get:function(){return this[_text]},set:function(t){t=String(t),this[_text]=t,this[_width$1]=this.measureWidth(t,this.fontSize),this[_height$1]=this.fontSize}},{key:"width",get:function(){return this[_width$1]},set:function(t){this[_width$1]=t}},{key:"height",get:function(){return this[_height$1]},set:function(t){this[_height$1]=t}},{key:"wrapHeight",get:function(){return this[_wrapHeight]},set:function(t){this[_wrapHeight]=t,this[_height$1]=t,this.initVerticalSize()}},{key:"wrapWidth",get:function(){return this[_wrapWidth]},set:function(t){this[_wrapWidth]=t,this[_width$1]=t,this[_height$1]=this.getHeightByWrapWidth()}},{key:"fontSize",get:function(){return this[_fontSize]},set:function(t){this[_fontSize]=t,this.font="".concat(this[_fontSize],"px sans-serif"),this[_width$1]=this.measureWidth(this.text,t),this[_height$1]=t+this.lineGap}},{key:"writeMode",get:function(){return this[_writeMode]},set:function(t){0<(this[_writeMode]=t).length&&this.initVerticalSize()}},{key:"collectStatus",value:function(){this.fontSize&&(this.font="".concat(this.fontSize,"px sans-serif"),this[_height$1]=this.fontSize+this.lineGap),this.setTextAlign(this.textAlign),this.setTextBaseline(this.textBaseline),this.setFillStyle(this.color),this.fillText(this[_text])}},{key:draw,value:function(t){this.collectStatus(),this[drawGraphics](t),this.mask&&"Shape"===this.mask.name&&(this.mask.masked=this).mask[draw](t,!0)}},{key:"setFillStyle",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"black";return this.color=t,this[append](new SetFillStyle(t)),this}},{key:"fillStyle",value:function(t){return this.setFillStyle(t)}},{key:"fillText",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return this[_text]=t,this.x+=e,this.y+=i,this[_width$1]=this.measureWidth(this[_text],this.fontSize),this[remove]("FillText"),this[append](new FillText(t,this.x,this.y)),this}},{key:"setFont",value:function(t){return this.font=t,this}},{key:"setFontSize",value:function(t){return this.fontSize=t,this.font=this.font.replace(/\d+/,t),this.fontSize&&(this.font="".concat(this.fontSize,"px sans-serif"),this[_height$1]=this.fontSize+this.lineGap),this}},{key:"setTextBaseline",value:function(t){return this.textBaseline=t,this[append](new SetTextBaseline(t)),this}},{key:"setTextAlign",value:function(t){return this.textAlign=t,this[append](new SetTextAlign(t)),this}},{key:"setlineGap",value:function(t){return this.lineGap=t,this}},{key:"setWrapWidth",value:function(t){return this.wrapWidth=t,this[_width$1]=t,this}},{key:"setWrapHeight",value:function(t){return this.wrapHeight=t,this}},{key:"measureWidth",value:function(t,e){return t?(t.length,this.writeMode.length?e:((e=DisplayObject.getContext()).font=this.font,e.measureText(t).width)):0}},{key:"initVerticalSize",value:function(){var t,e;this.text.length&&(t=(e=this.getVerticalSize()).width,e=e.height,this[_width$1]=t,this[_height$1]=e)}},{key:"getVerticalSize",value:function(){var i=this.fontSize,r=this.lineGap,n=this.wrapHeight,s=.5*i,o=0,t=0,e=0,a=0,h=[],l=0;return this.text.split("").map(function(t){var e=0,e=needRotation(t)?s+r:i+r;o+=e,n<(a+=e)&&(l++,a=0),h[l]=h[l]||[],h[l].push({text:t,height:e})}),n?(t=n,e=h.length*i+(h.length*r-r)):(e=i,t=o),{width:e,height:t}}},{key:"getHeightByWrapWidth",value:function(){for(var t,e=DisplayObject.getContext(),i=this.wrapWidth,r=this.fontSize,n=this.text,s=0,o=0,a=0,h=[];t=n[s];)(a+=e.measureText(t).width*(r/defaultFontSize))<=i?h[o]?h[o]+=n[s]:h[o]=n[s]:(a=0,o++),s++;return this.height=h.length*r+(h.length*this.lineGap-this.lineGap)}},{key:"addChild",value:function(){throw new Error("不能给 Text 类添加子元素")}}])}(),Shape=function(){function e(){var t;return _classCallCheck(this,e),_defineProperty(t=_callSuper(this,e),"name","Shape"),_defineProperty(t,"isMask",!1),_defineProperty(t,"width",0),_defineProperty(t,"height",0),t[drawGraphics]=_get(_getPrototypeOf(e.prototype),drawGraphics,t),t.graphics.beginPath(),t}return _inherits(e,DisplayObject),_createClass(e,[{key:draw,value:function(t,e){this.isMask=!!e,t.globalAlpha=this[getAlpha](),this[drawGraphics](t)}},{key:"getBounds",value:function(){return console.error("Shape 不提供getBounds方法"),null}}])}(),extendsClassDraw$2=Symbol("extendsClassDraw");function getChangedBorderRadiusValue(t){var e,i={tl:0,tr:0,br:0,bl:0},r=(t=String(t).split(" ").map(function(t){return parseFloat(t)})).length;return 1===r?e=t[0]:2===r?(i.tl=i.br=t[0],i.tr=i.bl=t[1],e=i):3===r?(i.tl=t[0],i.br=t[2],i.tr=i.bl=t[1],e=i):4===r&&(i.tl=t[0],i.tr=t[1],i.br=t[2],i.bl=t[3],e=i),e}var BORDER_STYLES=["solid","dashed"],SimpleCss=function(){function e(){var t;return _classCallCheck(this,e),_defineProperty(t=_callSuper(this,e),"backgroundColor",""),_defineProperty(t,"border",""),_defineProperty(t,"borderTop",""),_defineProperty(t,"borderRight",""),_defineProperty(t,"borderBottom",""),_defineProperty(t,"borderLeft",""),_defineProperty(t,"borderLeftRound",!1),_defineProperty(t,"borderRightRound",!1),_defineProperty(t,"borderRadiusValue",""),t[extendsClassDraw$2]=_get(_getPrototypeOf(e.prototype),draw,t),t}return _inherits(e,DisplayObject),_createClass(e,[{key:"borderRadius",get:function(){return this.borderRadiusValue},set:function(t){t&&(this.borderRadiusValue="100%"!=t?getChangedBorderRadiusValue(t):t)}},{key:draw,value:function(t){(this.borderRadiusValue||this.borderLeftRound||this.borderRightRound)&&this.initBorderRadiusMask(),this.backgroundColor&&this.initBackgroundColor(),(this.border||this.borderTop||this.borderRight||this.borderBottom||this.borderLeft)&&this.initBorder(),this.mask&&"Shape"===this.mask.name&&(this.mask.masked=this).mask[draw](t,!0),this[extendsClassDraw$2](t)}},{key:"getBorderAttr",value:function(t){var t=_slicedToArray(t.split(" "),3),e=t[0],i=t[1],t=t[2],e=parseFloat(e);return BORDER_STYLES.indexOf(i)<0&&console.warn("不支持的边框样式"),[e,i,t]}},{key:"setBorderStyles",value:function(t,e,i){this.graphics.beginPath(),"dashed"===e&&this.graphics.setLineDash([t,t]),this.graphics.lineWidth(t).strokeStyle(i)}},{key:"getHorizontalRoundRectPath",value:function(t,e){var i=new Shape,r=.5*e;return i.graphics.beginPath().fillStyle("#ff00ff").arc(r,r,r,.5*Math.PI,1.5*Math.PI).lineTo(t-r,0).arc(t-r,r,r,1.5*Math.PI,2.5*Math.PI).lineTo(r,e),i}},{key:"getLeftRoundRectPath",value:function(t,e){var i=new Shape,r=.5*e;return i.graphics.beginPath().arc(r,r,r,.5*Math.PI,1.5*Math.PI).lineTo(t,0).lineTo(t,e).lineTo(r,e),i}},{key:"getRightRoundRectPath",value:function(t,e){var i=new Shape,r=.5*e;return i.graphics.beginPath().moveTo(0,0).lineTo(t-r,0).arc(t-r,r,r,1.5*Math.PI,2.5*Math.PI).lineTo(0,e),i}},{key:"getVerticalRoundRectPath",value:function(t,e){var i=new Shape,r=.5*t;return i.graphics.beginPath().arc(r,r,r,Math.PI,2*Math.PI).lineTo(t,e-r).arc(r,e-r,r,0,Math.PI).lineTo(0,r),i}},{key:"initBorder",value:function(){var t,e,i,r;this.border?(t=(e=_slicedToArray(this.getBorderAttr(this.border),3))[0],this.setBorderStyles(t,e[1],e[2]),e=.5*t,this.borderRadius?("100%"!==this.borderRadius&&this.borderRadius!==this.width||this.width!==this.height?this.borderRadius>=this.height?(r=this.getHorizontalRoundRectPath(this.width,this.height)).graphics.stroke():this.borderRadius>=this.width?(r=this.getVerticalRoundRectPath(this.width,this.height)).graphics.stroke():(r=new Shape).graphics.strokeRoundRect(0,0,this.width,this.height,this.borderRadius):(r=new Shape,i=.5*this.width,r.graphics.strokeCircle(i,i,i)),this.addChild(r)):this.graphics.strokeRect(e,e,this.width-t,this.height-t)):(this.borderTop&&(this.setBorderStyles.apply(this,_toConsumableArray(this.getBorderAttr(this.borderTop))),this.graphics.moveTo(0,0).lineTo(this.width,0).stroke()),this.borderRight&&(this.setBorderStyles.apply(this,_toConsumableArray(this.getBorderAttr(this.borderRight))),this.borderRightRound?(i=.5*this.height,this.graphics.arc(this.width-i,i,i,1.5*Math.PI,2.5*Math.PI)):this.graphics.moveTo(this.width,0).lineTo(this.width,this.height),this.graphics.stroke()),this.borderBottom&&(this.setBorderStyles.apply(this,_toConsumableArray(this.getBorderAttr(this.borderBottom))),this.graphics.moveTo(0,this.height).lineTo(this.width,this.height).stroke()),this.borderLeft&&(this.setBorderStyles.apply(this,_toConsumableArray(this.getBorderAttr(this.borderLeft))),this.borderLeftRound?(r=.5*this.height,this.graphics.arc(r,r,r,.5*Math.PI,1.5*Math.PI)):this.graphics.moveTo(0,0).lineTo(0,this.height),this.graphics.stroke()))}},{key:"initBorderRadiusMask",value:function(){var t,e;"100%"!==this.borderRadiusValue&&this.borderRadiusValue!==this.width||this.width!==this.height?this.borderRadiusValue>=this.height||this.borderRightRadius&&this.borderLeftRadius?(e=this.getHorizontalRoundRectPath(this.width,this.height)).graphics.clip().fill():this.borderRadiusValue>=this.width?(e=this.getVerticalRoundRectPath(this.width,this.height)).graphics.clip().fill():this.borderLeftRound?(e=this.getLeftRoundRectPath(this.width,this.height)).graphics.clip().fill():this.borderRightRound?(e=this.getRightRoundRectPath(this.width,this.height)).graphics.clip().fill():(console.log(this.borderRadiusValue,333),(e=new Shape).graphics.fillRoundRect(0,0,this.width,this.height,this.borderRadiusValue)):(t=.5*this.width,(e=new Shape).graphics.fillCircle(t,t,t)),this.mask=e}},{key:"initBackgroundColor",value:function(){this.graphics.beginPath().fillStyle(this.backgroundColor).fillRect(0,0,this.width,this.height)}}])}(),extendsClassDraw$1=Symbol("extendsClassDraw"),Image=function(){function r(t){var e,i;for(i in _classCallCheck(this,r),_defineProperty(e=_callSuper(this,r),"name","Image"),_defineProperty(e,"image",null),_defineProperty(e,"path",""),_defineProperty(e,"sx",void 0),_defineProperty(e,"sy",void 0),_defineProperty(e,"sWidth",void 0),_defineProperty(e,"sHeight",void 0),_defineProperty(e,"dx",0),_defineProperty(e,"dy",0),_defineProperty(e,"dWidth",void 0),_defineProperty(e,"dHeight",void 0),e[extendsClassDraw$1]=_get(_getPrototypeOf(r.prototype),draw,e),t)e[i]=t[i];return e.path=e.image,e.width?e.dWidth=e.width:e.width=e.dWidth,e.height?e.dHeight=e.height:e.height=e.dHeight,e}return _inherits(r,SimpleCss),_createClass(r,[{key:drawImage$1,value:function(t,e,i){t.globalAlpha=this[getAlpha](),null!=this.sx?t.drawImage(this.path,this.sx,this.sy,this.sWidth,this.sHeight,e,i,this.dWidth,this.dHeight):null!=this.dWidth?t.drawImage(this.path,e,i,this.dWidth,this.dHeight):t.drawImage(this.path,e,i)}},{key:draw,value:function(e){var t=_slicedToArray(this.getPosition(),2),i=t[0],i=this.dx+i,t=this.dy+t[1];this[extendsClassDraw$1](e),this[drawImage$1](e,i,t),this.childs.forEach(function(t){t[draw](e)})}}])}(),drawImage=Symbol("drawImage"),drawSliced=Symbol("drawSliced"),left=Symbol("left"),top=Symbol("top"),right=Symbol("right"),bottom=Symbol("bottom"),setSlice=Symbol("setSlice"),_sliceBounds=Symbol("_sliceBounds"),Sprite=function(){function r(t,e){var i;return _classCallCheck(this,r),_defineProperty(i=_callSuper(this,r),"name","Sprite"),_defineProperty(i,"img",null),_defineProperty(i,"sliced",!1),t&&(i.img=t),i.parentDraw=_get(_getPrototypeOf(r.prototype),draw,i),e&&i[setSlice](e),i}return _inherits(r,Group),_createClass(r,[{key:"sliceBounds",get:function(){return this[_sliceBounds]},set:function(t){this._setSlice(t),this[_sliceBounds]=t}},{key:draw,value:function(e){var i=this,t=_slicedToArray(this.getPosition(),2),r=t[0],t=t[1];this.wRatio=this.width/this.img.width,this.hRatio=this.height/this.img.height,this.enableWidth=(this.width-this[left]-this[right])*this.scaleX,this.enableHeight=(this.height-this[top]-this[bottom])*this.scaleY,this[instructions].forEach(function(t){t.exec(e,i)}),this.sliced?this[drawSliced](e,r,t,this[getAlpha]()):this[drawImage](e,r,t),this.childs.forEach(function(t){t[draw](e)})}},{key:drawImage,value:function(t,e,i){new Image({image:this.img,dx:e,dy:i,dWidth:this.width,dHeight:this.height})[draw](t)}},{key:drawSliced,value:function(e,t,i,r){var n={image:this.img,sx:0,sy:0,sWidth:this[left],sHeight:this[top],dWidth:this[left]*this.scaleX,dHeight:this[top]*this.scaleY,dx:t,dy:i},s={image:this.img,sx:this[left],sy:0,sWidth:this.img.width-this[right]-this[left],sHeight:this[top],dWidth:this.enableWidth,dHeight:this[top]*this.scaleY,dx:this[left]*this.scaleX+t,dy:i},t={image:this.img,sx:this.img.width-this[right],sy:0,sWidth:this[right],sHeight:this[top],dWidth:this[right]*this.scaleX,dHeight:this[top]*this.scaleY,dx:this[left]*this.scaleX+s.dWidth+t,dy:i},i={image:this.img,sx:this.img.width-this[right],sy:this[top],sWidth:this[right],sHeight:this.img.height-this[bottom]-this[top],dWidth:this[right]*this.scaleX,dHeight:this.enableHeight,dx:t.dx,dy:t.dy+this[top]*this.scaleY},o={image:this.img,sx:this.img.width-this[right],sy:this.img.height-this[bottom],sWidth:this[right],sHeight:this[bottom],dWidth:this[right]*this.scaleX,dHeight:this[bottom]*this.scaleY,dx:t.dx-.3,dy:i.dy+i.dHeight},a={image:this.img,sx:this[left],sy:this.img.height-this[bottom],sWidth:this.img.width-this[left]-this[right],sHeight:this[bottom],dWidth:this.enableWidth,dHeight:this[bottom]*this.scaleY,dx:s.dx,dy:i.dy+i.dHeight},h={image:this.img,sx:0,sy:this.img.height-this[bottom],sWidth:this[left],sHeight:this[bottom],dWidth:this[left]*this.scaleX,dHeight:this[bottom]*this.scaleX,dx:n.dx,dy:i.dy+i.dHeight},l={image:this.img,sx:0,sy:this[top],sWidth:this[left],sHeight:this.img.height-this[top]-this[bottom],dWidth:this[left]*this.scaleX,dHeight:this.enableHeight,dx:n.dx,dy:i.dy},t=[n,s,t,i,o,a,h,l,{image:this.img,sx:n.sWidth,sy:n.sHeight,sWidth:s.sWidth,sHeight:l.sHeight,dWidth:this.enableWidth,dHeight:this.enableHeight,dx:n.dx+n.dWidth,dy:n.dy+n.dHeight}];return 0!=this.rotation&&console.error("Sprite 因为旋转后会出现拼接缝隙，在九宫格状态下暂时无法旋转, 待小程序完全支持离屏渲染后修复"),t.forEach(function(t){t=new Image(t);t.alpha=r,t[draw](e)}),this}},{key:"_setSlice",value:function(t){return this.sliced=!0,this[left]=t.left,this[top]=t.top,this[right]=t.right,this[bottom]=t.bottom,this}},{key:"setSlice",value:function(t){return this._setSlice(t)}}])}(),_width=Symbol("width"),_height=Symbol("height"),_alignItems=Symbol("_alignItems"),_justifyContent=Symbol("_justifyContent"),_direction=Symbol("_direction"),_flex=Symbol("_flex"),extendsClassDraw=Symbol("extendsClassDraw"),Container=function(){function i(t){var e;return _classCallCheck(this,i),_defineProperty(e=_callSuper(this,i),"name","Container"),e[extendsClassDraw]=_get(_getPrototypeOf(i.prototype),draw,e),e.direction="row",e.justifyContent="center",e.alignItems="center",e}return _inherits(i,SimpleCss),_createClass(i,[{key:"width",get:function(){return this[_width]},set:function(t){this[_width]=t}},{key:"height",get:function(){return this[_height]},set:function(t){this[_height]=t}},{key:"flex",get:function(){return this[_flex]},set:function(t){this[_flex]=t}},{key:"direction",get:function(){return this[_direction]},set:function(t){this[_direction]=t}},{key:"alignItems",get:function(){return this[_alignItems]},set:function(t){this[_alignItems]=t}},{key:"justifyContent",get:function(){return this[_justifyContent]},set:function(t){this[_justifyContent]=t}},{key:"getChildsWidth",value:function(){var e=0;return this.childs.forEach(function(t){return e+=t.width}),e}},{key:"getChildsHeight",value:function(){var e=0;return this.childs.forEach(function(t){return e+=t.height}),e}},{key:"getBetweenGapWidth",value:function(t){return(t-this.getChildsWidth())/(this.childs.length-1)}},{key:"getBetweenGapHeight",value:function(t){return(t-this.getChildsHeight())/(this.childs.length-1)}},{key:"getAroundGapWidth",value:function(t){return(t-this.getChildsWidth())/this.childs.length}},{key:"getAroundGapHeight",value:function(t){return(t-this.getChildsHeight())/this.childs.length}},{key:"setRow",value:function(){this.setJustifyContent(),this.setAlignItems()}},{key:"setRowReverse",value:function(){this.setJustifyContent(!0),this.setAlignItems()}},{key:"setAlignItems",value:function(){var t=this.childs,e=this.height;if("center"===this.alignItems)for(var i=0,r=t.length;i<r;i++){var n=t[i];n.y+=.5*e-.5*n.height}else if("flex-start"===this.alignItems)for(var s=0,o=t.length;s<o;s++)t[s].y=0;else if("flex-end"===this.alignItems)for(var a=0,h=t.length;a<h;a++){var l=t[a];l.y+=e-l.height}t.forEach(function(t){"flex-start"===t.alignSelf?t.y=0:"center"===t.alignSelf?t.y=.5*e-.5*t.height:"flex-end"===t.alignSelf&&(t.y=e-t.height)})}},{key:"setJustifyContent",value:function(t){var e=this.width,i=this.childs,r=this.justifyContent;if(t&&(i=this.childs.reverse(),"flex-start"===r?r="flex-end":"flex-end"===r&&(r="flex-start")),"flex-start"===r)for(var n=0;n<i.length;n++){var s=i[n];0<n?s.x+=i[n-1].x+i[n-1].width:s.x=0}else if("flex-end"===r)for(var o=this.getChildsWidth(),a=0;a<i.length;a++){var h=i[a];h.x+=0<a?i[a-1].x+i[a-1].width:e-o}else if("center"===r)for(var l=this.getChildsWidth(),c=0;c<i.length;c++){var u=i[c];u.x+=0<c?i[c-1].x+i[c-1].width:.5*(e-l)}else if("space-between"===r)for(var d=this.getBetweenGapWidth(e),f=0,p=i.length;f<p;f++){var g=i[f];g.x+=0<f?i[f-1].x+i[f-1].width+d:0}else if("space-around"===r)for(var y=this.getAroundGapWidth(e),v=0,_=i.length;v<_;v++){var m=i[v];m.x+=0<v?i[v-1].x+i[v-1].width+y:.5*y}}},{key:"setJustifyContentForColumn",value:function(t){var e=this.height,i=this.childs,r=this.justifyContent;if(t&&(i=this.childs.reverse(),"flex-start"===r?r="flex-end":"flex-end"===r&&(r="flex-start")),"flex-start"===r)for(var n=0;n<i.length;n++){var s=i[n];s.y+=0<n?i[n-1].y+i[n-1].height:0}else if("flex-end"===r)for(var o=this.getChildsHeight(),a=0;a<i.length;a++){var h=i[a];h.y+=0<a?i[a-1].y+i[a-1].height:e-o}else if("center"===r)for(var l=this.getChildsHeight(),c=0;c<i.length;c++){var u=i[c];0<c?u.y+=i[c-1].y+i[c-1].height:u.y=.5*(e-l)}else if("space-between"===r)for(var d=this.getBetweenGapHeight(e),f=0,p=i.length;f<p;f++){var g=i[f];g.y+=0<f?i[f-1].y+i[f-1].height+d:0}else if("space-around"===r)for(var y=this.getAroundGapHeight(e),v=0,_=i.length;v<_;v++){var m=i[v];m.y+=0<v?i[v-1].y+i[v-1].height+y:.5*y}}},{key:"setAlignItemsByColumn",value:function(){var t=this.childs,e=this.width;if("center"===this.alignItems)for(var i=0,r=t.length;i<r;i++){var n=t[i];n.x+=.5*e-.5*n.width}else if("flex-start"===this.alignItems)for(var s=0,o=t.length;s<o;s++)t[s].x=0;else if("flex-end"===this.alignItems)for(var a=0,h=t.length;a<h;a++){var l=t[a];l.x+=e-l.width}t.forEach(function(t){"flex-start"===t.alignSelf?t.x=0:"center"===t.alignSelf?t.x=.5*e-.5*t.width:"flex-end"===t.alignSelf&&(t.x=e-t.width)})}},{key:"setColumn",value:function(){this.setJustifyContentForColumn(),this.setAlignItemsByColumn()}},{key:"setColumnReverse",value:function(){this.setJustifyContentForColumn(!0),this.setAlignItemsByColumn()}},{key:draw,value:function(t){var e=this.direction;"row"===e?this.setRow():"row-reverse"===e?this.setRowReverse():"column"===e?this.setColumn():"column-reverse"===e&&this.setColumnReverse(),this[extendsClassDraw](t)}}])}(),CreateLinearGradient=function(){return _createClass(function t(e,i,r,n){_classCallCheck(this,t),_defineProperty(this,"name","CreateLinearGradient"),_defineProperty(this,"colorStops",[]),this.x0=e,this.y0=i,this.x1=r,this.y1=n},[{key:"exec",value:function(t,e){var e=_slicedToArray(e.getPosition(),2),i=e[0],e=e[1],r=t.createLinearGradient(this.x0+i,this.y0+e,this.x1+i,this.y1+e);return this.colorStops.map(function(t){return r.addColorStop(t[0],t[1])}),r}},{key:"addColorStop",value:function(t,e){this.colorStops.push([t,e])}}])}(),CreateRadialGradient=function(){return _createClass(function t(e,i,r,n,s,o){_classCallCheck(this,t),_defineProperty(this,"name","CreateRadialGradient"),_defineProperty(this,"colorStops",[]),this.x0=e,this.y0=i,this.r0=r,this.x1=n,this.y1=s,this.r1=o},[{key:"create",value:function(t,e,i,r,n,s,o){return console.log(e,i,r,n,s,o),t.createRadialGradient(e,i,r,n,s,o)}},{key:"exec",value:function(t,e){var e=_slicedToArray(e.getPosition(),2),i=e[0],e=e[1],r=this.create(t,this.x0+i,this.y0+e,this.r0,this.x1+i,this.y1+e,this.r1);return this.colorStops.map(function(t){return r.addColorStop(t[0],t[1])}),r}},{key:"addColorStop",value:function(t,e){this.colorStops.push([t,e])}}])}(),DuduCanvas={load:function(t,e){return new ImgLoader(t,e)},Stage:function(t,e,i){return new Stage(t,e,i)},Shape:function(){return new Shape},Group:function(){return new Group},Text:function(t){return new Text(t)},Image:function(t){return new Image(t)},Sprite:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return _construct(Sprite,e)},color:{createLinearGradient:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return _construct(CreateLinearGradient,e)},createRadialGradient:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return _construct(CreateRadialGradient,e)}}};export{Container,CreateLinearGradient,CreateRadialGradient,DuduCanvas,Group,Image,ImgLoader,Shape,Sprite,Stage,Text};
